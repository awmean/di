{% extends 'base.html' %}

{% block title %}Luce di Villa - Каталог мебели{% endblock %}

{% block extra_styles %}
<style>
    .furniture-card {
        transition: all 0.3s ease;
    }

    .filter-btn {
        transition: all 0.3s ease;
    }

    .filter-btn.active {
        background-color: #7E7670;
        color: white;
    }

    .cart-item {
        animation: slideIn 0.3s ease-out;
    }

    .htmx-indicator {
        opacity: 0;
        transition: opacity 200ms ease-in;
    }

    .htmx-request .htmx-indicator {
        opacity: 1;
    }

    .htmx-request.htmx-indicator {
        opacity: 1;
    }

    @keyframes slideIn {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
</style>
{% endblock %}

{% block content %}
<!-- Cart Modal -->
<div id="cart-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50">
    <div class="flex items-center justify-center min-h-screen p-4">
        <div class="bg-white max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-8">
                <div class="flex justify-between items-center mb-8">
                    <h2 class="text-xl font-medium text-brand-dark uppercase tracking-[0.15em]">Корзина</h2>
                    <button id="close-cart" class="text-gray-500 hover:text-brand-brown transition-colors">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                  d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>

                <div id="empty-cart" class="text-center py-16">
                    <p class="text-gray-500 font-light text-lg">Корзина пуста</p>
                </div>

                <div id="cart-items" class="space-y-4 mb-8"></div>

                <div class="border-t border-gray-200 pt-6">
                    <div class="flex justify-between items-center mb-6">
                        <span class="text-lg font-medium text-brand-dark">Итого:</span>
                        <span id="cart-total" class="text-xl font-medium text-brand-dark">0 ₽</span>
                    </div>
                    <button id="send-order"
                            class="w-full bg-brand-brown text-white py-4 text-sm uppercase tracking-[0.2em] hover:bg-opacity-90 transition-all font-light">
                        Оформить заказ
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Order Modal -->
<div id="order-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50">
    <div class="flex items-center justify-center min-h-screen p-4">
        <div class="bg-white max-w-lg w-full">
            <div class="p-8">
                <div class="flex justify-between items-center mb-8">
                    <h2 class="text-xl font-medium text-brand-dark uppercase tracking-[0.15em]">Оформление заказа</h2>
                    <button id="close-order" class="text-gray-500 hover:text-brand-brown transition-colors">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                  d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>

                <form id="order-form" class="space-y-6">
                    <div>
                        <input type="text" id="customer-name" placeholder="Ваше имя"
                               class="w-full border border-gray-300 p-4 text-brand-dark font-light" required>
                    </div>
                    <div>
                        <input type="tel" id="customer-phone" placeholder="Телефон"
                               class="w-full border border-gray-300 p-4 text-brand-dark font-light" required>
                    </div>
                    <div>
                        <input type="email" id="customer-email" placeholder="Email"
                               class="w-full border border-gray-300 p-4 text-brand-dark font-light">
                    </div>
                    <div>
                        <textarea id="customer-comment" rows="4" placeholder="Комментарий к заказу"
                                  class="w-full border border-gray-300 p-4 text-brand-dark font-light"></textarea>
                    </div>
                    <button type="submit"
                            class="w-full bg-brand-brown text-white py-4 text-sm uppercase tracking-[0.2em] hover:bg-opacity-90 transition-all font-light">
                        Отправить заказ
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>

<main class="w-full py-12">
    <!-- Page Title -->
    <section class="mb-12">
        <div class="max-w-7xl mx-auto px-8">
            <h1 class="text-3xl lg:text-4xl font-light text-brand-dark uppercase tracking-[0.15em]">Каталог</h1>
        </div>
    </section>

    <!-- Filters -->
    <section class="mb-16">
        <div class="max-w-7xl mx-auto px-8">
            <div class="flex flex-wrap gap-4 justify-center lg:justify-start">
                <button class="filter-btn px-5 py-2 text-xs uppercase tracking-[0.15em] font-light bg-brand-dark text-white transition-all"
                        data-filter="all"
                        hx-get="{{ url_for('catalog') }}?category=all"
                        hx-target="#products-grid"
                        hx-push-url="true">
                    Все
                </button>
                <button class="filter-btn px-5 py-2 text-xs uppercase tracking-[0.15em] font-light bg-white border border-brand-dark text-brand-dark hover:bg-brand-dark hover:text-white transition-all"
                        data-filter="chairs"
                        hx-get="{{ url_for('catalog') }}?category=chairs"
                        hx-target="#products-grid"
                        hx-push-url="true">
                    Стулья
                </button>
                <button class="filter-btn px-5 py-2 text-xs uppercase tracking-[0.15em] font-light bg-white border border-brand-dark text-brand-dark hover:bg-brand-dark hover:text-white transition-all"
                        data-filter="tables"
                        hx-get="{{ url_for('catalog') }}?category=tables"
                        hx-target="#products-grid"
                        hx-push-url="true">
                    Столы
                </button>
                <button class="filter-btn px-5 py-2 text-xs uppercase tracking-[0.15em] font-light bg-white border border-brand-dark text-brand-dark hover:bg-brand-dark hover:text-white transition-all"
                        data-filter="sofas"
                        hx-get="{{ url_for('catalog') }}?category=sofas"
                        hx-target="#products-grid"
                        hx-push-url="true">
                    Диваны
                </button>
                <button class="filter-btn px-5 py-2 text-xs uppercase tracking-[0.15em] font-light bg-white border border-brand-dark text-brand-dark hover:bg-brand-dark hover:text-white transition-all"
                        data-filter="storage"
                        hx-get="{{ url_for('catalog') }}?category=storage"
                        hx-target="#products-grid"
                        hx-push-url="true">
                    Хранение
                </button>
            </div>
        </div>
    </section>

    <!-- Products Grid -->
    <section>
        <div class="max-w-7xl mx-auto px-8">
            <div id="products-grid">
                {% include 'partials/products_grid.html' %}
            </div>
        </div>
    </section>
</main>
{% endblock %}

{% block scripts %}
{{ super() }}
<script src="https://unpkg.com/htmx.org@1.9.8"></script>
{% endblock %}